var PRS$0=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),DP$0=Object.defineProperty,GOPD$0=Object.getOwnPropertyDescriptor,MIXIN$0=function(t,e){for(var i in e)e.hasOwnProperty(i)&&DP$0(t,i,GOPD$0(e,i));return t},DPS$0=Object.defineProperties,SP$0=Object.setPrototypeOf||function(t,e){return PRS$0?t.__proto__=e:DP$0(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},OC$0=Object.create,SquareCamera=function(){"use strict";function t(){this.x=0,this.y=0,this._renderX=0,this._renderY=0,this._rumbleOn=!1,this._rumbleOffset=0,this._rumbleDuration=0,this._rumbleIntensity=1,this.speed=.1}var e={};return DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),e.translateX=function(t){return Math.round(t+this._renderX+this._rumbleOffset)},e.translateY=function(t){return Math.round(t+this._renderY+this._rumbleOffset)},e.translateCoord=function(t){t.x=this.translateX(t.x),t.y=this.translateY(t.y)},e.translateContext=function(t){t.translate(+this.translateX(0),+this.translateY(0))},e.untranslateContext=function(t){t.translate(-this.translateX(0),-this.translateY(0))},e.set=function(t,e){this.x=t,this.y=e},e.attachTo=function(t){this._actorAttachment=t},e.detach=function(){this._actorAttachment=null},e.rumble=function(t,e){this._rumbleOn=!0,this._rumbleOffset=0,this._rumbleDuration=t,this._rumbleIntensity=e},e.update=function(t){this._updateRumble(t),this._updateFollow(t),this._updatePosition(t)},e._updateRumble=function(t){this._rumbleOn&&(this._rumbleDuration--,this._rumbleOffset=SquareMath.rand(-this._rumbleIntensity,+this._rumbleIntensity),this._rumbleDuration<=0&&(this._rumbleOn=!1,this._rumbleOffset=0))},e._updateFollow=function(t){this._actorAttachment&&(this.x=t.resolution.x/2-this._actorAttachment.position.x-16,this.y=t.resolution.y/2-this._actorAttachment.position.y-16)},e._updatePosition=function(t){this._renderX=SquareMath.lerp(this._renderX,this.x,this.speed),this._renderY=SquareMath.lerp(this._renderY,this.y,this.speed)},MIXIN$0(t.prototype,e),e=void 0,t}(),SquareCoordinate=function(){"use strict";function t(t,e){t||(t=0),e||(e=0),this.x=t,this.y=e}var e={};return DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),e.clone=function(){return new t(this.x,this.y)},MIXIN$0(t.prototype,e),e=void 0,t}(),SEVERITY_DEBUG=-1,SEVERITY_INFO=0,SEVERITY_WARNING=1,SEVERITY_ERROR=2,SquareDiagnostics=function(){"use strict";function t(){}function e(){return this._debugEnabled}DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1});var i={};return i.enableDebug=function(){this._debugEnabled=!0},i.disableDebug=function(){this._debugEnabled=!1},DPS$0(t,{debugEnabled:{get:e,configurable:!0,enumerable:!0}}),i.frameEnd=function(){if(this.debugEnabled){var t=Date.now();this.fpsTime||(this.frameCounter=0,this.fpsResult=0,this.fpsSkippedResult=0,this.fpsDroppedResult=0,this.fpsTime=t),this.frameCounter++,this._afterFrame()}},i.frameSkipped=function(){this.debugEnabled&&(this.framesSkipped||(this.framesSkipped=0),this.framesSkipped++,this._afterFrame())},i._afterFrame=function(){var t=Date.now();t-this.fpsTime>=1e3&&(this.fpsResult=this.frameCounter,this.fpsSkippedResult=this.framesSkipped,this.fpsDroppedResult=SquareMath.clamp(SquareEngine.frameRateTarget-this.fpsResult,0,SquareEngine.frameRateTarget),this.frameCounter=0,this.framesSkipped=0,this.fpsTime=t,this.logDebug("FPS result:",this.fpsResult))},i.logDebug=function(t,e){this.logMessage(t,e,SEVERITY_DEBUG)},i.logWarning=function(t,e){this.logMessage(t,e,SEVERITY_WARNING)},i.logError=function(t,e){this.logMessage(t,e,SEVERITY_ERROR)},i.logException=function(t){this.logMessage(t,null,SEVERITY_ERROR)},i.logMessage=function(t,e,i){if(i!==SEVERITY_DEBUG||this.debugEnabled){e||(e="");var r=console.log;switch(i){case SEVERITY_DEBUG:r=console.log;break;case SEVERITY_INFO:r=console.info;break;case SEVERITY_WARNING:r=console.warn;break;case SEVERITY_ERROR:r=console.error}r("["+(new Date).toLocaleTimeString()+"] "+t,e)}},MIXIN$0(t,i),i=void 0,t}(),SquareDrawContext=function(){"use strict";function t(){this.context=SquareEngine.context,this.canvas=SquareEngine.canvas,this.resolution=SquareEngine.resolution}return DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),t}(),SquareEngine=function(){"use strict";function t(){}function e(){return this._frameRateTarget}DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1});var i={};return i.start=function(e){SquareDiagnostics.logMessage("Starting SquareEngine. Hello world!"),this.canvas=document.getElementById(e),this.canvas?(this.$canvas=$(this.canvas),this.$canvas.css("display","block").css("position","absolute").css("top","0").css("left","0").css("right","0").css("bottom","0").css("width","100%").css("height","100%").show(),this.canvas.fillStyle="#00f",this.context=this.canvas.getContext("2d"),this.resolution=new SquareCoordinate(0,0),$(window).resize(function(){t.updateResolution()}),t.updateResolution(),this.camera=new SquareCamera,this.drawContext=new SquareDrawContext,this.updateContext=new SquareUpdateContext,this.uiComponents||(this.uiComponents=[]),this._frameRateTarget||this.setFrameRateTarget(30),this.stage=new SquareStage,this.keyboard=new SquareKeyboard,t.loop()):SquareDiagnostics.logError("Engine start failed: Canvas element not found on page",e)},i.setFrameRateTarget=function(t){this._frameRateTarget=t,this._frameInterval=1e3/this._frameRateTarget,this._frameStartTime=0},DPS$0(t,{frameRateTarget:{get:e,configurable:!0,enumerable:!0}}),i.loop=function(){requestAnimationFrame(t.loop);var e=Date.now(),i=e-t._frameStartTime;i>=t._frameInterval?(t.updateContext.delta=i-t.updateContext.delta,t.updateContext.deltaTotal=i,t._frameStartTime=e-i%t._frameInterval,t.update(t.updateContext),t.draw(t.drawContext),SquareDiagnostics.frameEnd(),t.updateContext.delta=0):(SquareDiagnostics.frameSkipped(),t.updateContext.delta=i,t.updateContext.deltaTotal=i)},i.update=function(t){this.camera.update(t),this.stage.update(t);for(var e=0;e<this.uiComponents.length;e++)this.uiComponents[e].update(t);this.keyboard.update(t)},i.draw=function(t){t.context.clearRect(0,0,t.resolution.x,t.resolution.y),this.camera.translateContext(t.context),this.stage.draw(t),this.camera.untranslateContext(t.context);for(var e=0;e<this.uiComponents.length;e++)this.uiComponents[e].draw(t)},i.updateResolution=function(){this.resolution.x=this.$canvas.outerWidth(),this.resolution.y=this.$canvas.outerHeight(),this.canvas.width=this.resolution.x,this.canvas.height=this.resolution.y,SquareDiagnostics.logMessage("Canvas resolution set to:",this.resolution)},i.addUiComponent=function(t){!t instanceof SquareUiComponent?console.warn("addUiComponent() failed: Variable is not an instance of SquareUiComponent class"):(this.uiComponents||(this.uiComponents=[]),this.uiComponents.push(t))},MIXIN$0(t,i),i=void 0,t}(),SquareMath=function(){"use strict";function t(){}DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1});var e={};return e.clamp=function(t,e,i){return t<e?e:t>i?i:t},e.lerp=function(t,e,i){return i=i<0?0:i,i=i>1?1:i,t+(e-t)*i},e.rand=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},MIXIN$0(t,e),e=void 0,t}(),SquareObject=function(){"use strict";function t(){}DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1});var e={};return e.update=function(t){},e.draw=function(t){},MIXIN$0(t.prototype,e),e=void 0,t}(),SquareRect=function(){"use strict";function t(t,e,i,r){t||(t=0),e||(e=0),i||(i=0),r||(r=0),this.x=t,this.y=e,this.w=i,this.h=r}function e(){return this.x}function i(){return this.x+this.w}function r(){return this.y}function o(){return this.y+this.h}var n={};return DPS$0(t.prototype,{left:{get:e,configurable:!0,enumerable:!0},right:{get:i,configurable:!0,enumerable:!0},top:{get:r,configurable:!0,enumerable:!0},bottom:{get:o,configurable:!0,enumerable:!0}}),DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),n.intersects=function(t){var e=this;return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)},MIXIN$0(t.prototype,n),n=void 0,t}(),SquareUiComponent=function(t){"use strict";function e(){t.call(this)}return PRS$0||MIXIN$0(e,t),null!==t&&SP$0(e,t),e.prototype=OC$0(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),DP$0(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),e}(SquareObject),SquareUpdateContext=function(){"use strict";function t(){this.resolution=SquareEngine.resolution,this.delta=0,this.deltaTotal=0}return DP$0(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),t}(),SquareActor=function(t){"use strict";function e(){t.call(this),this.id=null,this.zLayer=0,this.position=new SquareCoordinate(0,0),this.drawPosition=new SquareCoordinate(0,0),this.velocity=new SquareCoordinate(0,0),this.collider=null}PRS$0||MIXIN$0(e,t);var i={};return null!==t&&SP$0(e,t),e.prototype=OC$0(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),DP$0(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),i.emitParticles=function(t){var e=new SquareParticleEmitter;return e.position=this.position.clone(),e.emitterRemoveOnStop=!0,e.emitterRuntime=t,SquareEngine.stage.addActor(e),e.start(),e},i.remove=function(){this.id&&SquareEngine.stage.removeActorById(this.id)},i.update=function(t){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.drawPosition.x=Math.round(this.position.x),this.drawPosition.y=Math.round(this.position.y)},i.draw=function(t){},i.hasCollider=function(){return null!==this.collider},i.givesCollision=function(){return this.collider&&this.collider.givesCollision},i.receivesCollision=function(){return this.collider&&this.collider.receivesCollision},MIXIN$0(e.prototype,i),i=void 0,e}(SquareObject),SquareStage=function(t){"use strict";function e(){t.call(this),this.actorIdGenerator=0,this.actors={}}function i(){return this.actorIdGenerator++}PRS$0||MIXIN$0(e,t);var r={};return null!==t&&SP$0(e,t),e.prototype=OC$0(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0},nextActorId:{get:i,configurable:!0,enumerable:!0}}),DP$0(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),r.getActorById=function(t){return void 0!==this.actors[t]?this.actors[t]:null},r.removeActorById=function(t){void 0!==this.actors[t]&&(this.actors[t].id=null,delete this.actors[t])},r.addActor=function(t){t.id=this.nextActorId,this.actors[t.id]=t,SquareDiagnostics.logDebug("Stage: Added an actor to stage, ID #"+t.id+":",t)},r.getCollidables=function(){var t=[];for(var e in this.actors){var i=this.actors[e];i.givesCollision()&&t.push(i)}return t},r.update=function(t){for(var e in this.actors)this.actors[e].update(t)},r.draw=function(t){var e=0,i=null,r=[],o=!0;for((r=Object.values(this.actors).slice()).length>0&&(o=!0);o;){for(var n=[],s=0;s<r.length;s++){var a=r[s];a.zLayer<=e?(a.draw(t),a.hasCollider()&&SquareDiagnostics.debugEnabled&&a.collider.draw(t)):(r.push(a),(null===i||a.zLayer<i)&&(i=a.zLayer))}null!==i?(r=n,e=i,i=null,o=!0):o=!1}},MIXIN$0(e.prototype,r),r=void 0,e}(SquareObject),SquareCollider=function(t){"use strict";function e(e,i,r,o,n,s){t.call(this),e||(e=0),i||(i=0),r||(r=32),o||(o=32),this.position=new SquareEngine(e,i),this.size=new SquareCoordinate(r,o),this.receivesCollision=!!n,this.givesCollision=!!s,this.rect=new SquareRect}PRS$0||MIXIN$0(e,t);var i={};return null!==t&&SP$0(e,t),e.prototype=OC$0(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),DP$0(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),i.attachTo=function(t){this._actorTarget=t},i.detatch=function(){this._actorTarget=null},i.draw=function(t){this.givesCollision&&(t.context.strokeStyle="#07ff00",t.context.strokeRect(this.position.x,this.position.y,this.size.x,this.size.y)),this.receivesCollision&&(t.context.strokeStyle="#0007ff",t.context.strokeRect(this.position.x+1,this.position.y+1,this.size.x-2,this.size.y-2)),this.colliding&&(this.collidingFlash?(t.context.strokeStyle="#ff0000",t.context.strokeRect(this.position.x,this.position.y,this.size.x,this.size.y),this.collidingFlash=!1):this.collidingFlash=!0)},i.update=function(t){if(this.givesCollision||this.receivesCollision){this._actorTarget&&(this.position=this._actorTarget.position),this.rect.x=this.position.x,this.rect.y=this.position.y,this.rect.w=this.size.x,this.rect.h=this.size.y;var e=this.colliding;if(this.colliding=!1,this.didCollide=!1,this.collidingWith=[],this.receivesCollision)for(var i=SquareEngine.stage.getCollidables(),r=0;r<i.length;r++){var o=i[r],n=o.collider;if(n!==this&&n.collidesWith(this)){this.colliding=!0,e||(this.didCollide=!0),this.collidingWith.push(o);var s=void 0,a=void 0,l=void 0,u=void 0;Math.abs(o.velocity.x)>Math.abs(this._actorTarget.velocity.x)?(s=o,l=this._actorTarget):(s=this._actorTarget,l=o),Math.abs(o.velocity.y)>Math.abs(this._actorTarget.velocity.y)?(a=o,u=this._actorTarget):(a=this._actorTarget,u=o),l.velocity.x=s.velocity.x,s.velocity.x=-s.velocity.x/2,u.velocity.y=s.velocity.y,a.velocity.y=-a.velocity.y/2}}}},i.collidesWith=function(t){return t.rect.intersects(this.rect)},MIXIN$0(e.prototype,i),i=void 0,e}(SquareObject),SquareFrameInfoUiComponent=function(t){"use strict";function e(){t.call(this),this.delta=0}PRS$0||MIXIN$0(e,t);var i={};return null!==t&&SP$0(e,t),e.prototype=OC$0(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),DP$0(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),i.update=function(t){this.delta=t.delta.toFixed(0),this.text=t.resolution.x+"x"+t.resolution.y+" / "+SquareDiagnostics.fpsResult+" FPS / "+this.delta+" ms",SquareDiagnostics.fpsSkippedResult>0&&(this.text+=" / Fast, skipped "+SquareDiagnostics.fpsSkippedResult+" frames"),SquareDiagnostics.fpsDroppedResult>0&&(this.text+=" / Slow, dropped "+SquareDiagnostics.fpsDroppedResult+" frames")},i.draw=function(t){t.context.fillStyle="#270027",t.context.fillText(this.text,26,26),t.context.fillText(this.text,24,24),t.context.fillStyle="#f0f",t.context.fillText(this.text,25,25)},MIXIN$0(e.prototype,i),i=void 0,e}(SquareUiComponent),SquareKeyboard=function(t){"use strict";function e(){t.call(this),this.keysDownNow=[];for(var e=0;e<255;e++)this.keysDownNow[e]=!1;this.keysDownLast=this.keysDownNow.slice(),this.bindWindowEvents()}PRS$0||MIXIN$0(e,t);var i={};return null!==t&&SP$0(e,t),e.prototype=OC$0(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),DP$0(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),i.bindWindowEvents=function(){window.addEventListener("keydown",function(t){this.keysDownNow[t.keyCode]=!0}.bind(this)),window.addEventListener("keyup",function(t){this.keysDownNow[t.keyCode]=!1}.bind(this))},i.update=function(t){this.keysDownLast=this.keysDownNow.slice()},i.keyIsPressed=function(t){return!!this.keysDownNow[t]},i.keyIsUp=function(t){return!this.keysDownNow[t]},i.keyWasPressedBefore=function(t){return!!this.keysDownLast[t]},i.keyWasUpBefore=function(t){return!this.keysDownLast[t]},i.keyWasPressedNow=function(t){return this.keyIsPressed(t)&&!this.keyWasPressedBefore(t)},i.keyWasReleasedNow=function(t){return this.keyIsUp(t)&&!this.keyWasUpBefore(t)},MIXIN$0(e.prototype,i),i=void 0,e}(SquareObject),SquareKeyCode={CANCEL:3,HELP:6,BACK_SPACE:8,TAB:9,CLEAR:12,RETURN:13,ENTER:14,SHIFT:16,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINTSCREEN:44,INSERT:45,DELETE:46,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,NUM9:57,SEMICOLON:59,EQUALS:61,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUMPAD0:96,NUMPAD1:97,NUMPAD2:98,NUMPAD3:99,NUMPAD4:100,NUMPAD5:101,NUMPAD6:102,NUMPAD7:103,NUMPAD8:104,NUMPAD9:105,MULTIPLY:106,ADD:107,SEPARATOR:108,SUBTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NUM_LOCK:144,SCROLL_LOCK:145,COMMA:188,PERIOD:190,SLASH:191,BACK_QUOTE:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,QUOTE:222,META:224},SquareParticle=function(t){"use strict";function e(){t.call(this),this.velocity.x=SquareMath.rand(-5,5),this.velocity.y=SquareMath.rand(-5,5),this.size=6,this.color="#fff"}function i(){return this.size<1}PRS$0||MIXIN$0(e,t);var r={};return null!==t&&SP$0(e,t),e.prototype=OC$0(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0},isComplete:{get:i,configurable:!0,enumerable:!0}}),DP$0(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),r.update=function(e){this.isComplete||(t.prototype.update.call(this,e),this.size=SquareMath.lerp(this.size,0,.1))},r.draw=function(t){this.isComplete||(t.context.fillStyle=this.color,t.context.fillRect(this.position.x,this.position.y,this.size,this.size))},MIXIN$0(e.prototype,r),r=void 0,e}(SquareActor),SquareParticleEmitter=function(t){"use strict";function e(){t.call(this),this.particles=[],this.emitterStarted=!1,this.emitterRuntime=1/0,this.emitterRemoveOnStop=!0,this.emitterParticleType=SquareParticle,this.emitterParticleAmount=1,this.emitterParticleAmountMin=0,this.emitterParticleAmountMax=20,this.emitterParticleColor="#ffffff",this.emitterParticleSizeMin=4,this.emitterParticleSizeMax=6}PRS$0||MIXIN$0(e,t);var i={};return null!==t&&SP$0(e,t),e.prototype=OC$0(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),DP$0(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),i.start=function(){this.id||SquareDiagnostics.logDebug("Debug warning: Starting particle emitter that does not have a stage ID"),this.emitterRuntime<=0&&SquareDiagnostics.logDebug("Debug warning: Starting particle emitter that has no runtime remaining"),this.particles=[],this.emitterStarted=!0},i.stop=function(){this.emitterStarted&&(this.emitterStarted=!1),this.emitterRemoveOnStop&&0===this.particles.length&&this.remove()},i.update=function(t){for(var e=0;e<this.particles.length;e++)this.particles[e].update(t);for(var i=[],r=0;r<this.particles.length;r++){var o=this.particles[r];o.isComplete||i.push(o)}if(this.particles=i,!this.emitterStarted||this.emitterRuntime<=0)this.stop();else{var n=this.emitterParticleAmount;this.particles.length+n<this.emitterParticleAmountMin&&(n=this.emitterParticleAmountMin);for(var s=0;s<n&&this.particles.length<=this.emitterParticleAmountMax;s++){var a=new this.emitterParticleType;a.color=this.emitterParticleColor,a.position=this.position.clone(),a.size=SquareMath.rand(this.emitterParticleSizeMin,this.emitterParticleSizeMax),this.particles.push(a),a.update(t)}this.emitterRuntime--}},i.draw=function(t){for(var e=0;e<this.particles.length;e++)this.particles[e].draw(t)},MIXIN$0(e.prototype,i),i=void 0,e}(SquareActor);$(document).ready(function(){SquareDiagnostics.enableDebug(),SquareEngine.setFrameRateTarget(30),SquareEngine.start("game"),SquareDiagnostics.debugEnabled&&SquareEngine.addUiComponent(new SquareFrameInfoUiComponent);for(var t=0;t<333;t++)SquareEngine.stage.addActor(new GuyActor);var e=SquareEngine.stage.getActorById(321);SquareEngine.camera.attachTo(e),e.isPlayer=!0,e.update(SquareEngine.updateContext);var i=new SquareParticleEmitter;i.emitterRuntime=1/0,i.emitterParticleAmountMin=0,i.emitterParticleAmountMax=1/0,i.emitterParticleColor="#ff0000",i.position=e.position.clone(),i.start(),SquareEngine.stage.addActor(i)});var GuyActor=function(t){"use strict";function e(){t.call(this),this.didInit=!1,this.collider=new SquareCollider(0,0,32,32,!0,!0),this.collider.attachTo(this),this.isPlayer=!1}PRS$0||MIXIN$0(e,t);var i={};return null!==t&&SP$0(e,t),e.prototype=OC$0(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),DP$0(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),i.update=function(e){t.prototype.update.call(this,e);for(var i=!1;!this.didInit;)this.position.x=SquareMath.rand(-e.resolution.x,e.resolution.x),this.position.y=SquareMath.rand(-e.resolution.y,e.resolution.y),this.velocity.x=SquareMath.rand(-10,10)/100,this.velocity.y=SquareMath.rand(-10,10)/100,this.collider.update(e),this.collider.colliding||(this.didInit=!0),i=!0;if(i)for(var r=0;r<600;r++)this.velocity.y+=SquareMath.rand(-10,10)/1e3,this.velocity.x-=SquareMath.rand(-10,10)/1e3;if(this.isPlayer?(SquareEngine.keyboard.keyIsPressed(SquareKeyCode.RIGHT)&&this.velocity.x++,SquareEngine.keyboard.keyIsPressed(SquareKeyCode.LEFT)&&this.velocity.x--,SquareEngine.keyboard.keyIsPressed(SquareKeyCode.DOWN)&&this.velocity.y++,SquareEngine.keyboard.keyIsPressed(SquareKeyCode.UP)&&this.velocity.y--):(this.velocity.y+=SquareMath.rand(-10,10)/10,this.velocity.x-=SquareMath.rand(-10,10)/10),this.velocity.x=SquareMath.lerp(this.velocity.x,0,.05),this.velocity.y=SquareMath.lerp(this.velocity.y,0,.05),this.collider.update(e),this.collider.didCollide&&this.isPlayer&&SquareEngine.camera.rumble(SquareEngine.frameRateTarget/10,10),this.collider.didCollide){var o=this.emitParticles(10);o.emitterParticleAmountMin=10,o.emitterParticleAmount=5,o.emitterParticleAmountMax=15,o.emitterRuntime=3,o.position.x+=12,o.position.y+=12}},i.draw=function(e){this.didInit&&(t.prototype.draw.call(this,e),e.context.fillStyle=this.isPlayer?"#ff0000":"#fff",e.context.fillRect(this.drawPosition.x,this.drawPosition.y,32,32))},MIXIN$0(e.prototype,i),i=void 0,e}(SquareActor);